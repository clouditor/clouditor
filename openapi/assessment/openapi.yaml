# Generated with protoc-gen-openapi
# https://github.com/googleapis/gnostic/tree/master/apps/protoc-gen-openapi

openapi: 3.0.3
info:
    title: Assessment
    description: 'Representing the link between orchestrator and discovery: Assessing evidences from discovery and sending results to orchestrator'
    version: 0.0.1
paths:
    /v1/assessment/evidences:
        post:
            summary: Assesses the evidence sent by discovery. Part of the public API, also exposed as REST
            operationId: Assessment_AssessEvidence
            parameters:
                - name: id
                  in: query
                  description: the ID in a uuid format
                  schema:
                    type: string
                - name: service_id
                  in: query
                  description: reference to a service this evidence was gathered from
                  schema:
                    type: string
                - name: resource_id
                  in: query
                  description: reference to the resource this evidence was gathered from
                  schema:
                    type: string
                - name: timestamp
                  in: query
                  description: 'TODO: replace with google/type/date.proto'
                  schema:
                    type: string
                - name: applicable_metrics
                  in: query
                  schema:
                    type: string
                - name: raw
                  in: query
                  description: '"raw" evidence (for the auditor), for example the raw JSON response from the API. This does not follow a defined schema'
                  schema:
                    type: string
                - name: resource
                  in: query
                  description: optional; a semantic representation of the Cloud resource according to our defined ontology. a JSON serialized node of our semantic graph. This may be Clouditor-specific.
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BoolValue'
    /v1/assessment/results:
        post:
            summary: 'TODO(all): Part of public API because external entities (mainly discoveries) can use it? List the latest set of assessment results. Part of the public API, also exposed as REST'
            operationId: Assessment_ListAssessmentResults
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListAssessmentResultsResponse'
components:
    schemas:
        BoolValue:
            properties:
                value:
                    type: boolean
                    description: The bool value.
            description: Wrapper message for `bool`. The JSON representation for `BoolValue` is JSON `true` and `false`.
        ListAssessmentResultsResponse:
            properties:
                results:
                    type: array
                    items:
                        $ref: '#/components/schemas/Result'
        Result:
            properties:
                resource_id:
                    type: string
                compliant:
                    type: boolean
                metric_id:
                    type: integer
                    format: int32
            description: A result resource, representing the result after assessing the cloud resource with id resource_id.
